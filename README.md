# Rust 嵌入式开发之四轴飞行器

这是一个使用 STM32F103C8T6 单片机以 Rust 开发语言开发四轴飞行器的项目，实现一个四轴飞行器的飞行控制程序，使其能够稳定地飞行，并通过遥控器进行操控。

注意：由于使用了 RTIC 所以需要使用 rust nightly 版本。

## 项目文档

- [Archlinux 环境搭建](./docs/Archlinux环境搭建.md)
- [Defmt 单元测试](./docs/Defmt单元测试.md)
- [飞行器设计文档](./docs/飞行器设计文档.md)
- [元器件清单](./docs/元器件清单.md)
- [硬件介绍](./docs/硬件介绍.md)
- [引脚配置表](./docs/引脚配置表.md)

## 功能设计

- [x] OLED 模块: 显示一些实时数据；
- [x] 电源模块: 用于系统启动/关闭；
- [x] 定时器: 用于指令循环读取与执行；
- [x] USART 串口通信: 用于后台指令调试；
- [x] 姿态计算模块；
- [x] PID 算法：常用于稳定飞行；
- [x] 电机驱动模块: 控制电机转速；
- [ ] 遥控通信: 接收遥控器信号；
- [ ] 飞行控制: 控制飞行器飞行姿态；
- [ ] ESP8266 WIFI 通讯: WIFI 控制飞行姿态；
- [ ] 编码器: 监测直流电机的转速;

## 待处理

- [ ] NRF24L01 通信

  - [ ] 接收数据
    - [ ] Usart 转发无线消息到 pc
    - [ ] 根据命令控制飞机上的 led 灯
  - [ ] 对频
    - [ ] 控制蜂鸣器，飞控开机开始对频，默认间断蜂鸣，对频成功后停止

- [ ] 手柄

  - [ ] 对频
  - [ ] 发送数据
    - NRF24L01 处于发送模式
    - 默认会一直发送数据，发送为[0;32], 当有数据时，对应的索引值发生变化
    - 摇杆输入
    - 按键输入

- [ ] 编码器
  - [ ] 监测直流电机的转速
    - [ ] 定时器配置为编码器接口模式
    - [ ] 在规定时间内读取电机速度传感器返回的脉冲个数
    - [ ] 根据 M 法进行速度求解
  - [ ] 电机自身对转速的限制（机械受力强度）
  - [ ] 用户界面显示需要
    - [ ] 实时显示直流电机实际速度到串口

## 参考文档

- [RTIC RTOS](https://rtic.rs/2/book/en/preface.html)
- [物联网嵌入式开发基础到项目实战：7 无人机项目] (https://www.bilibili.com/video/BV1Gy4y117jg?p=1&vd_source=c459b4f4f90bc42bb5ddb5baf12e1bc7)
